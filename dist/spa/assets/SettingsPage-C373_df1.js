import{aj as C,b as P,k as _,m as h,n as t,q as l,U as s,p as e,a9 as v,an as w,a5 as k,t as c,v as n,a8 as q,a_ as T,X as b}from"./index-BCQP80hx.js";import{Q as p,a as o}from"./QItem-rw1yFefp.js";import{Q as r}from"./QItemLabel-l38w8CTe.js";import{Q}from"./QList-CHOuisuT.js";import{Q as V}from"./QSelect-DCR9V7w2.js";import{Q as L}from"./QPage-DZO8eRE2.js";import{u as I}from"./use-quasar-C6NPZew5.js";import{s as S}from"./supabase-3Ri18K4t.js";import{u as N}from"./app-CpO0JZ69.js";import"./QChip-BZCpNEhF.js";import"./QMenu-DrHU5L3Z.js";import"./selection-CdExz2ft.js";import"./format-CJebrXOQ.js";const U={class:"row q-col-gutter-lg"},A={class:"col-12"},B={class:"text-h4 text-weight-bold q-mb-lg"},E={class:"col-12 col-md-8"},R={class:"text-h6 text-weight-bold q-mb-md"},D={class:"text-h6 text-weight-bold q-mb-md"},ee={__name:"SettingsPage",setup(j){const d=I(),m=N(),g=C({notifications:!0}),x={English:{title:"Settings",securityTitle:"Security & Access",resetPassword:"Reset Password",resetPasswordCaption:"Send a password reset email to your inbox",notifications:"System Notifications",notificationsCaption:"Receive alerts about class attendance and fees",preferencesTitle:"App Preferences",language:"Language",languageCaption:"Choose your preferred language",resetLinkSent:"Password reset link sent to "},Sinhala:{title:"සැකසුම්",securityTitle:"ආරක්ෂාව සහ පිවිසුම",resetPassword:"මුරපදය නැවත සකසන්න",resetPasswordCaption:"මුරපදය අලුත් කිරීමට ඊමේල් පණිවිඩයක් එවන්න",notifications:"පද්ධති නිවේදන",notificationsCaption:"පැමිණීම සහ ගාස්තු පිළිබඳ දැනුම්දීම් ලබා ගන්න",preferencesTitle:"පද්ධති මනාපයන්",language:"භාෂාව",languageCaption:"ඔබ කැමති භාෂාව තෝරන්න",resetLinkSent:"මුරපදය නැවත සැකසීමේ පණිවිඩය යවන ලදී: "}},a=P(()=>x[m.language]),y=async()=>{const{data:{user:u}}=await S.auth.getUser();if(!u)return;d.loading.show();const{error:i}=await S.auth.resetPasswordForEmail(u.email,{redirectTo:window.location.origin+"/login"});d.loading.hide(),i?d.notify({type:"negative",message:i.message}):d.notify({type:"positive",message:a.value.resetLinkSent+u.email,timeout:5e3})};return(u,i)=>(h(),_(L,{class:"q-pa-lg"},{default:t(()=>[l("div",U,[l("div",A,[l("h1",B,s(a.value.title),1)]),l("div",E,[e(v,{flat:"",bordered:"",class:"rounded-borders q-mb-lg"},{default:t(()=>[e(w,null,{default:t(()=>[l("div",R,s(a.value.securityTitle),1),e(Q,{separator:""},{default:t(()=>[k((h(),_(p,{clickable:"",onClick:y},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(c,{name:"lock",color:"primary"})]),_:1}),e(o,null,{default:t(()=>[e(r,{class:"text-weight-medium"},{default:t(()=>[n(s(a.value.resetPassword),1)]),_:1}),e(r,{caption:""},{default:t(()=>[n(s(a.value.resetPasswordCaption),1)]),_:1})]),_:1}),e(o,{side:""},{default:t(()=>[e(c,{name:"chevron_right"})]),_:1})]),_:1})),[[q]]),e(p,null,{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(c,{name:"notifications",color:"orange"})]),_:1}),e(o,null,{default:t(()=>[e(r,{class:"text-weight-medium"},{default:t(()=>[n(s(a.value.notifications),1)]),_:1}),e(r,{caption:""},{default:t(()=>[n(s(a.value.notificationsCaption),1)]),_:1})]),_:1}),e(o,{side:""},{default:t(()=>[e(T,{modelValue:g.notifications,"onUpdate:modelValue":i[0]||(i[0]=f=>g.notifications=f),color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{flat:"",bordered:"",class:"rounded-borders"},{default:t(()=>[e(w,null,{default:t(()=>[l("div",D,s(a.value.preferencesTitle),1),e(Q,{separator:""},{default:t(()=>[e(p,null,{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(c,{name:"translate",color:"blue"})]),_:1}),e(o,null,{default:t(()=>[e(r,{class:"text-weight-medium"},{default:t(()=>[n(s(a.value.language),1)]),_:1}),e(r,{caption:""},{default:t(()=>[n(s(a.value.languageCaption),1)]),_:1})]),_:1}),e(o,{side:""},{default:t(()=>[e(V,{modelValue:b(m).language,"onUpdate:modelValue":i[1]||(i[1]=f=>b(m).language=f),options:["English","Sinhala"],borderless:"",dense:"",class:"q-px-sm"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1}))}};export{ee as default};
